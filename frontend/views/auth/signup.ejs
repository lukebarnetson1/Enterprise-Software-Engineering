<%- include('../partials/header') %>

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                     <h2 class="card-title text-center mb-4">Sign Up</h2>
                     <form id="signup-form" method="POST" action="/auth/signup" novalidate>
                        <input type="hidden" name="_csrf" value="<%= csrfToken %>" />

                        <div class="mb-3">
                            <label for="email" class="form-label">Email:</label>
                            <input class="form-control" type="email" name="email" id="email" required title="Enter a valid email address." value="<%= oldInput.email || '' %>" autofocus/>
                        </div>
                        <div class="mb-3">
                            <label for="username" class="form-label">Username:</label>
                            <input class="form-control" type="text" name="username" id="username" required minlength="3" maxlength="30" pattern="^[a-zA-Z0-9_]+$" title="Username must be 3-30 characters and contain only letters, numbers, and underscores." value="<%= oldInput.username || '' %>"/>
                            <div class="form-text">Must be 3-30 characters (letters, numbers, underscores only).</div>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password:</label>
                            <input class="form-control" type="password" name="password" id="password" required minlength="8" title="Password must be at least 8 characters long."/>
                             <div id="password-strength-bar" class="mt-2" style="width: 100%; height: 10px; background: #ccc; border-radius: 5px; overflow: hidden;">
                                <div id="password-strength-fill" style="width: 0%; height: 100%; background: red; transition: width 0.3s ease, background-color 0.3s ease;"></div>
                            </div>
                            <small id="password-strength-text" class="form-text text-muted">Password Strength:</small>
                        </div>
                        <div class="mb-3">
                            <label for="confirm-password" class="form-label">Confirm Password:</label>
                            <input class="form-control" type="password" name="confirm-password" id="confirm-password" required title="Passwords must match."/>
                        </div>
                         <div class="d-grid">
                             <button class="btn btn-primary" type="submit">Sign Up</button>
                         </div>

                    </form>
                </div>
                 <div class="card-footer text-center py-3">
                    Already have an account?
                    <a href="/auth/login">Log In</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js" defer></script>
<script src="/js/password-strength.js" defer></script>


<%- include('../partials/footer') %>